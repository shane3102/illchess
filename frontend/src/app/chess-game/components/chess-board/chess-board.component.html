<div *ngIf="boardView">
    <div *ngFor="let rank of ranks">
        <div style="display: flex; justify-content: center;">
            <div *ngFor="let file of files">
                <app-chess-square 
                (pieceDraggedInfoEmitter)="pieceDraggedChange($event)" 
                (pieceDroppedInfoEmitter)="pieceDroppedChange($event)"
                (pieceDraggedReleasedInfoEmitter)="pieceDraggedRelease()"
                [boardId]="boardId"
                [piece]="
                    (this.boardView | async)?.piecesLocations ? 
                    (this.boardView | async)?.piecesLocations![file+rank] ? 
                    (this.boardView | async)?.piecesLocations![file+rank] : 
                    undefined : 
                    undefined"
                [illegalMoveView]="illegalMoveView"
                [draggedPieceInfo]="draggedPieceInfo | async"
                [squareInfo]="{file: file, rank: rank}"
                [legalMoves]="legalMoves | async">
            </app-chess-square>
            </div>
        </div>
    </div>
    <div style="text-align: center;">
        {{(boardView | async)!.gameState}}
        {{(boardView | async)!.victoriousPlayerColor}}
        {{(legalMoves | async) | json}}
    </div>
</div>